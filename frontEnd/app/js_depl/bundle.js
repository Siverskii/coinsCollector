!function(e){function t(s){if(n[s])return n[s].exports;var o=n[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,s){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:s})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="./frontEnd/app/js_depl/",t(t.s=24)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={},o=-1,i=function(){this.trigger=function(e,t){if(!s[e])return!1;s[e].forEach(function(e){return e.callback(t)})},this.on=function(e,t){s[e]||(s[e]=[]);var n=++o;return s[e].push({callback:t,subEventId:n}),n},this.off=function(e){Object.keys(s).forEach(function(t){s[t].forEach(function(n,o){n.subEventId==e&&(s[t].length>1?s[t].splice(o,1):delete s[t])})})}},a=new i;t.eventDispatcher=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){return new Function("model, tagClass, viewId","let source = "+JSON.stringify('<div id="<%=viewId%>" class="<%=tagClass%>">'+e+"</div>").replace(/<%=(.+?)%>/g,function(e,t){return'"+'+t.replace(/[&<>[](){}"']/g,"")+'+"'}).replace(/<%(.+?)%>/g,'";$1 source+="')+";return source;")};t.templateMaker=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.coinModel=void 0;var s=n(3),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.url=e.url||"test",delete e.url,this._coinAttr=e};o.prototype.set=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)this._coinAttr[t]=e[t];return this},o.prototype.getAttr=function(){var e={};for(var t in this._coinAttr)e[t]=this._coinAttr[t];return e},o.prototype.get=function(e){return this._coinAttr[e]},o.prototype.fetch=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s.RESTfulAPI.init({method:"GET",url:this.url+"?imgNum="+e.imgNum+"&imgPageNum="+e.imgPageNum+"&imgSeries="+e.imgSeries}).send().then(function(e){"200"==e.status?n.success(e,t.set(JSON.parse(e.data))):n.error(e)},function(){})},o.prototype.save=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0;t=void 0!=this._coinAttr.id?"PUT":"POST",s.RESTfulAPI.init({method:t,url:this.url}).send(this._coinAttr).then(function(t){"200"==t.status?e.success(t):e.error(t)},function(){})},t.coinModel=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){};s.prototype.init=function(e){var t=e.method,n=e.url;return this.method=t,this.url=n,this},s.prototype.send=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise(function(n,s){var o=new XMLHttpRequest;o.open(e.method,e.url,!0),o.setRequestHeader("Content-Type","application/json"),o.addEventListener("load",function(){n({status:o.status,data:o.responseText})}),o.send(JSON.stringify(t))})};var o=new s;t.RESTfulAPI=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={view:function(){},extendView:function(e){var t=Object.create(this.view.prototype);return t.constructor=e,e.prototype=t,e}};s.view.prototype.render=function(e){var t=this;if(void 0!=this.events){var n=[];for(var s in this.events)if(Object.hasOwnProperty.call(this.events,s)){var o=s.split(" ");n.push([o[0],o[1],this.events[s]])}this.events=n}var i=void 0;return i=void 0!=this.model?this.model.getAttr():{},document.querySelector(this.rootId).insertAdjacentHTML("beforeend",this.tpl(i,this.tagClass,this.viewId)),void 0!=this.events&&this.events.forEach(function(e){Array.from(document.querySelector(t.rootId).lastElementChild.querySelectorAll(e[1])).forEach(function(n){return n.addEventListener(e[0],t[e[2]].bind(t))})}),this},s.view.prototype.renderTo=function(e){var t=this;if(void 0!=this.events){var n=[];for(var s in this.events)if(Object.hasOwnProperty.call(this.events,s)){var o=s.split(" ");n.push([o[0],o[1],this.events[s]])}this.events=n}return e.insertAdjacentHTML("beforeend",this.tpl(this.model.getAttr(),this.tagClass,this.viewId)),void 0!=this.events&&this.events.forEach(function(n){Array.from(e.querySelectorAll(n[1])).forEach(function(e){return e.addEventListener(n[0],t[n[2]].bind(t))})}),this},s.view.prototype.remove=function(){void 0!=this.events&&this.events.forEach(function(e){Array.from(document.querySelector(e[1])).forEach(function(t){return t.removeEventListener(e[0],e[2])})})},t.baseView=s},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var o=n(23),i=(s(o),n(22)),a=(s(i),n(0)),r=n(8),c=n(7);r.pageController.showContentPage(),a.eventDispatcher.on("bookHaveOpened",function(){r.pageController.addNewCoinsSeries().then(function(){return document.querySelector("#chap0").classList.remove("loadingFog"),document.querySelector("#chap1").classList.remove("loadingFog"),r.pageController.addNewCoinsSeries()}).then(function(){return document.querySelector("#chap2").classList.remove("loadingFog"),r.pageController.addNewCoinsSeries()}).then(function(){return document.querySelector("#chap3").classList.remove("loadingFog"),r.pageController.addNewCoinsSeries()}).then(function(){return document.querySelector("#chap4").classList.remove("loadingFog"),r.pageController.addNewCoinsSeries()}).then(function(){return document.querySelector("#chap5").classList.remove("loadingFog"),r.pageController.addNewCoinsSeries()}).then(function(){return document.querySelector("#chap6").classList.remove("loadingFog"),r.pageController.addNewCoinsSeries()}).then(function(){document.querySelector("#chap7").classList.remove("loadingFog"),r.pageController.showAboutPage(),c.messageController.showCollectionHasLoaded()}).then(function(){document.querySelector("#chap8").classList.remove("loadingFog"),r.pageController.showEndPage()}).catch(function(){return c.messageController.showConnectionError()})}),a.eventDispatcher.on("showConnectionError",function(){return c.messageController.showConnectionError()})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.coinsCollection=void 0;var s=n(3),o=n(2),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.url=e.url+"?series="+e.seriesNumber,this.seriesNumber=e.seriesNumber,this.collection=[]};i.prototype.pop=function(){return this.collection.pop()},i.prototype.fetch=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s.RESTfulAPI.init({method:"GET",url:this.url}).send(null).then(function(n){if("200"==n.status){var s=JSON.parse(n.data);Object.keys(s).forEach(function(t){e.collection.push(new o.coinModel(s[t]))}),t.success(e.collection)}else t.error(n)})},t.coinsCollection=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.messageController=void 0;var s=n(20),o=(function(e){e&&e.__esModule}(s),function(){this.showConnectionError=function(){var e=Array.from(document.querySelectorAll(".page__footer_messField,.backPage__footer_messField"));e.forEach(function(e){e.classList.remove("completeMessage"),e.classList.add("errorMessage"),e.innerHTML="Сбой при загрузке, <br> проверьте соединение с интернетом."}),setTimeout(function(){e.forEach(function(e){e.classList.remove("errorMessage"),e.innerHTML=""}),e=null},6e3)},this.showCollectionHasLoaded=function(){var e=Array.from(document.querySelectorAll(".page__footer_messField,.backPage__footer_messField"));e.forEach(function(e){e.classList.add("completeMessage"),e.innerHTML="Все коллекции успешно загружены."}),setTimeout(function(){e.forEach(function(e){e.classList.remove("completeMessage"),e.innerHTML="<span class='arrow'>&#10150</span>"}),e=null},4e3)}}),i=new o;t.messageController=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pageController=void 0;var s=n(21),o=(function(e){e&&e.__esModule}(s),n(19)),i=n(6),a=n(2),r=n(0),c=n(12),l=n(11),d=n(13),u=n(9),p=n(10),g=function(){var e=0;this.showContentPage=function(){(new c.contentPageView).render();t(),o.rotateController.start()},this.addNewCoinsSeries=function(){return new Promise(function(n,s){new i.coinsCollection({url:"getCoinsSeries",seriesNumber:e++}).fetch({success:function(e){var s=0;e.forEach(function(e){e.set({pageNumb:2*document.querySelectorAll(".contentSection").length+1,modelIndex:s++}),new l.coinsPageView(e).render()}),r.eventDispatcher.trigger("addNewPages"),t(),n()},error:function(){s()}})})},r.eventDispatcher.on("addNewPages",function(){return t()}),r.eventDispatcher.on("pageCtrlGetCoinsDescr",function(e){var t=e.imgNum>11?1:0,n=e.view.querySelectorAll(".page__body")[t],s=n.querySelector(".coinsContainer"),o=n.querySelector(".coinDescriptionWrapper");new a.coinModel({url:"getCoinDescription"}).fetch(e,{success:function(e,t){var n=.8,i=setInterval(function(){n-=.1,n>0?s.setAttribute("style","opacity:"+n):(clearInterval(i),s.setAttribute("style","opacity:0"),o.setAttribute("style","display:block"),s.setAttribute("style","display:none"))},30);t.set({coinsContainer:s,coinDescription:o}),new p.coinsDescriptionView(t).renderTo(o)},error:function(){r.eventDispatcher.trigger("showConnectionError")}})}),r.eventDispatcher.on("closeDescription",function(e){e.get("coinsContainer").setAttribute("style","display:flex"),e.get("coinDescription").setAttribute("style","display:none"),e.get("coinDescription").innerHTML=""}),this.showEndPage=function(){(new d.endPageView).render(),r.eventDispatcher.trigger("addNewPages"),t()},this.showAboutPage=function(){(new u.aboutPageView).render(),r.eventDispatcher.trigger("addNewPages"),t()};var t=function(){for(var e=document.querySelectorAll(".pageSection"),t=e.length,n=window,s=0;s<t;s++){var o=n.getComputedStyle(e[s]).getPropertyValue("transform"),i=180*Math.acos(o.split(",")[0].split("(")[1])/Math.PI;"none"==o||180*Math.acos(o.split(",")[0].split("(")[1])/Math.PI<90?"none"==o?e[s].setAttribute("style","z-index:"+(t-s)):e[s].setAttribute("style","transform:rotateY("+-i+"deg); z-index:"+(t-s)):(180!=i&&(i=-i),e[s].setAttribute("style","transform:rotateY("+i+"deg); z-index:"+(2-(t-s-1))))}r.eventDispatcher.trigger("captureNewCurrentPageZindex")}},f=new g;t.pageController=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aboutPageView=void 0;var s=n(4),o=n(1),i=n(14),a=s.baseView.extendView(function(){this.rootId=".coinsBook",this.tpl=(0,o.templateMaker)(i.aboutPageViewTpl)});t.aboutPageView=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.coinsDescriptionView=void 0;var s=n(4),o=n(1),i=n(0),a=n(15),r=s.baseView.extendView(function(e){this.tagClass="coinDescription",this.tpl=(0,o.templateMaker)(a.coinsDescriptionViewTpl),this.model=e,this.events={"click .closeDescription":"closeDescription"},this.closeDescription=function(){i.eventDispatcher.trigger("closeDescription",this.model)}});t.coinsDescriptionView=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.coinsPageView=void 0;var s=n(4),o=n(1),i=n(0),a=n(16),r=s.baseView.extendView(function(e){this.viewId="view"+Date.now(),this.rootId=".coinsBook",this.tagClass="",this.model=e,this.tpl=(0,o.templateMaker)(a.coinsPageViewTpl),this.events={"click .coinsContainer":"getCoinsDescr","click .page__footer_messField":"openPage","click .backPage__footer_messField":"closePage"},this.getCoinsDescr=function(e){var t=["Города воинской славы","Древние города России","Российская Федерация","Русский балет","Красная книга","70-летие Победы","Памятные монеты"],n=t.indexOf(e.target.getAttribute("data-series"));-1!=n&&i.eventDispatcher.trigger("pageCtrlGetCoinsDescr",{imgNum:e.target.getAttribute("data-img"),imgPageNum:e.target.getAttribute("data-page"),imgSeries:n,view:document.querySelector("#"+this.viewId)})},this.openPage=function(){i.eventDispatcher.trigger("openPage",document.querySelector("#"+this.viewId).firstElementChild)},this.closePage=function(){i.eventDispatcher.trigger("closePage",document.querySelector("#"+this.viewId).firstElementChild)}});t.coinsPageView=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentPageView=void 0;var s=n(4),o=n(1),i=n(0),a=n(17),r=s.baseView.extendView(function(){this.viewId="view"+Date.now(),this.rootId="#coinEntrance",this.tagClass="pageContainer",this.tpl=(0,o.templateMaker)(a.contentPageViewTpl),this.events={"click .page__nav_item":"turnThePage","click .page__footer_messField":"openPage","click .backPage__footer_messField":"closePage"},this.turnThePage=function(e){var t=e.currentTarget;t.firstChild.classList.contains("loadingFog")||i.eventDispatcher.trigger("turnThePage",Math.floor(t.getAttribute("data-num")/2))},this.openPage=function(){i.eventDispatcher.trigger("openPage",document.querySelector(".chaptersSection"))},this.closePage=function(){i.eventDispatcher.trigger("closePage",document.querySelector(".chaptersSection"))}});t.contentPageView=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.endPageView=void 0;var s=n(4),o=n(1),i=n(18),a=s.baseView.extendView(function(){this.rootId=".coinsBook",this.tpl=(0,o.templateMaker)(i.endPageViewTpl)});t.endPageView=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.aboutPageViewTpl='\n<section class="col-xs-12 pageSection contentSection chaptersSection">\n    <div class="page frontPage">\n        <header class="page__header">\n            <h1> О сайте </h1>\n            <hr>\n        </header>\n        <div class="col-xs-10 col-xs-offset-1 page__body aboutPage">\n            <p>\n                &nbsp Сайт представляет собой интерактивную коллекцию отечественных монет, выполненную в виде коллекционного альбома. Все монеты разбиты по соответствующим сериям. При нажатии на монету, будет показана подробная информация о ней. <br>\n                &nbsp Сайт посвящается всем любителям нумизматики! Приятного пользования!\n            </p>\n        </div>\n        <footer class="col-xs-10 col-xs-offset-1 page__footer">\n            <hr>\n            <div class="col-xs-10 col-xs-offset-1 page__footer_messField"></div>\n            <span class="pageNum">25</span>\n        </footer>\n    </div>\n    <div class="page backPage">\n        <header class="page__header">\n                <h1> Для заметок </h1>\n                <hr>\n        </header>\n         <div class="page__body">\n        </div>\n        <footer class="col-xs-10 col-xs-offset-1 page__footer">\n            <hr>\n            <span class="pageNum">26</span>\n            <div class="col-xs-10 col-xs-offset-1 backPage__footer_messField"></div>\n        </footer>\n    </div>\n</section> '},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.coinsDescriptionViewTpl='\n<div class="coinImage_descriptionWrapper">\n<div class="coinImage_descriptionIntWrapper">\n        <img class = "coinImage coinImage_description" src="data:png;base64,<%=model.avers%>">\n   </div>\n   <div class="coinImage_descriptionIntWrapper">\n    <img class = "coinImage coinImage_description" src="data:png;base64,<%=model.revers%>">\n    </div>\n</div>\n<div class = "page__nav">\n    <ul>\n        <li class=""><span>Наименование: </span> <span class="description__coinsName"><%=model.name%><span/> </li>\n        <li class=""><span>Дата выпуска: </span> <span><%=model.date%><span/></li>\n        <li class=""><span></span> <span class="closeDescription">Закрыть<span/></li>\n    </ul>   \n</div>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.coinsPageViewTpl='\n<section class="col-xs-12 pageSection contentSection coinsSection">\n    <div class="page frontPage">\n        <header class="page__header">\n            <h1> <%= model.series%> </h1>\n            <hr>\n        </header>\n        <div class="col-xs-10 col-xs-offset-1 page__body">\n            <div class="coinDescriptionWrapper"></div>\n            <div class="row coinsContainer">\n                <% for(let i = 0; i<12; i++){%>\n                    <div class="col-xs-3 coinImageContainer"> \n                        <div data-img = "<%=i%>" data-page="<%=model.modelIndex%>" data-series="<%=model.series%>" class = "coinImageContainerInner">\n                            <% if(model.img[i]){%> \n                                <img class = "coinImage" src="data:png;base64,<%=model.img[i]%>">\n                            <%}%> \n                        </div>\n                    </div>  \n                <%}%>\n            </div>   \n        </div>\n        <footer class="col-xs-10 col-xs-offset-1 page__footer">\n            <hr>\n            <div class="col-xs-10 col-xs-offset-1 page__footer_messField"></div>\n            <span class="pageNum"><%=model.pageNumb++%></span>\n        </footer>\n    </div>\n    <div class="page backPage">\n        <header class="page__header">\n                <h1> <%= model.series%> </h1>\n                <hr>\n        </header>\n         <div class="col-xs-10 col-xs-offset-1 page__body">\n            <div class="coinDescriptionWrapper"></div>\n            <div class="row coinsContainer">\n                <% for(let i = 12; i<24; i++){%>\n                    <div class="col-xs-3 coinImageContainer">\n                        <div data-img = "<%=i%>" data-page="<%=model.modelIndex%>" data-series="<%=model.series%>" class = "coinImageContainerInner">\n                            <% if(model.img[i]){%> \n                                <img class = "coinImage" src="data:png;base64,<%=model.img[i]%>">\n                            <%}%>\n                         </div>     \n                    </div>  \n                <%}%>\n            </div>    \n        </div>\n        <footer class="col-xs-10 col-xs-offset-1 page__footer">\n            <hr>\n            <span class="pageNum"><%=model.pageNumb%></span>\n            <div class="col-xs-10 col-xs-offset-1 backPage__footer_messField"></div>\n        </footer>\n    </div>\n</section> '},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.contentPageViewTpl='<div class = "col-xs-6 coinsBook">\n    <section id = "firstPage" class="col-xs-12 pageSection titleSection">\n        <div class="page page_titlePage frontPage">\n            <div class="col-xs-10 col-xs-offset-1 page__titleForTitlePage">\n                <p>\n                   Коллекционер\n                </p>\n           </div>\n        </div>\n        <div class="page page_titlePage backPage">\n            <div class="col-xs-10 col-xs-offset-1 page__titleForTitlePage">\n                <p>\n                    &nbsp Интерес к монетам возник ещё в эпоху Возрождения. Итальянский поэт Франческо Петрарка был большим любителем античных монет. К середине XVI века, по подсчётам \n                    В.Гольциуса, в Европе было уже 950 мюнцкабинетов.<br>&nbsp  Наука нумизматика оформилась лишь в XIX веке. Большой вклад в это внес Г.Гроте, который объединил нумизматику и науку о деньгах, что явилось началом трансформации нумизматики в общественно-историческую науку.\n                </p>\n           </div>\n        </div>  \n    </section>\n    <section class="col-xs-12 pageSection contentSection chaptersSection">\n        <div class="page frontPage">\n            <header class="page__header">\n                <h1> Содержание </h1>\n                <hr>\n            </header>\n            <div class="page__body">\n                <nav class = "col-xs-10 col-xs-offset-1 page__nav">\n                    <div id="chap0" class = "loadingFog page__chapter"> <span>Серии монет</span> <span>3</span></div>\n                    <ul class = "col-xs-11 col-xs-offset-1">\n                        <li class = "page__nav_item" data-num = "3"><span id="chap1" class="loadingFog">Города воинской славы</span> <span class="">3<span/></li>\n                        <li class = "page__nav_item" data-num = "7"><span id="chap2" class="loadingFog">Древние города России</span> <span class="">7<span/></li>\n                        <li class = "page__nav_item" data-num = "11"><span id="chap3" class="loadingFog">Российская Федерация</span>  <span class="">11<span/></li>\n                        <li class = "page__nav_item" data-num = "15"><span id="chap4" class="loadingFog">Русский балет</span>         <span class="">15<span/></li>\n                        <li class = "page__nav_item" data-num = "17"><span id="chap5" class="loadingFog">Красная книга</span>         <span class="">17<span/></li>\n                        <li class = "page__nav_item" data-num = "19"><span id="chap6" class="loadingFog">70-летие Победы</span>      <span class="">19<span/> </li>\n                        <li class = "page__nav_item" data-num = "21"><span id="chap7" class="loadingFog">Памятные монеты</span>       <span class="">21<span/> </li>\n                    </ul>\n                    <div class = "col-xs-12">\n                         \x3c!--<div class = "page__chapter"> <span>Профиль</span> <span>25</span> </div> --\x3e \n                        <div id="chap8" class = "page__nav_item loadingFog page__chapter" data-num = "25"><span class="">О сайте</span><span>25</span> </div>\n                    </div>   \n                </nav>\n            </div>\n            <footer class="col-xs-10 col-xs-offset-1 page__footer">\n                <hr>\n\n                <div class="col-xs-10 col-xs-offset-1 page__footer_messField"></div>\n                <span class="pageNum">1</span>\n            </footer>\n        </div>\n        <div class="page backPage">\n            <header class="page__header">\n                    <h1> Количество монет в сериях </h1>\n                    <hr>\n            </header>\n             <div class="page__body">\n                <div class = "col-xs-10 col-xs-offset-1 page__nav">\n                    <ul class = "col-xs-12">\n                        <li class=""><span>Города воинской славы</span> <span>37 шт.<span/> </li>\n                        <li class=""><span>Древние города России</span> <span>34 шт.<span/></li>\n                        <li class=""><span>Российская Федерация</span>  <span>39 шт.<span/></li>\n                        <li class=""><span>Русский балет</span>         <span>12 шт.<span/></li>\n                        <li class=""><span>Красная книга</span>         <span>3 шт.<span/></li>\n                        <li class="" ><span>70-летие Победы</span>       <span>3 шт.<span/> </li>\n                        <li class=""><span>Памятные монеты</span>       <span>26 шт.<span/> </li>\n                    </ul>   \n                </div>\n            </div>\n            <footer class="col-xs-10 col-xs-offset-1 page__footer">\n                <hr>\n                <span class="pageNum">2</span>\n                <div class="col-xs-10 col-xs-offset-1 backPage__footer_messField"></div>\n\n            </footer>\n        </div>\n    </section> \n</div>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.endPageViewTpl='\n<section class="col-xs-12 pageSection endSection">\n    <div class="page page_titlePage frontPage"></div>\n    <div class="page page_titlePage backPage"></div>\n</section>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rotateController=void 0;var s=n(0),o=function(){var e=void 0,t=void 0,n=void 0,o=void 0,i=void 0,a=void 0,r=void 0,c=void 0,l=void 0,d=void 0,u=void 0,p=!1,g=!1,f=!1,v=!1,h=!0,m=document,_=window;this.start=function(){var b=w(),x=document.querySelectorAll(".pageSection").length;_.addEventListener("orientationchange",function(){_.location.reload(!1)}),_.addEventListener("resize",function(){b=w()}),s.eventDispatcher.on("addNewPages",function(){return P()}),s.eventDispatcher.on("captureNewCurrentPageZindex",function(){n&&(o=_.getComputedStyle(n).getPropertyValue("z-index"),i=l>=90?"matrix3d(-1, 0, 0, 0, 0, 1, 0, 0, 0, 0, -1, 0, 0, 0, 0, 1)":_.getComputedStyle(n).getPropertyValue("transform"))}),s.eventDispatcher.on("turnThePage",function(e){var t=document,n=t.querySelectorAll(".coinsSection"),o=Array.prototype.slice.call(n,0,e-2);e-2>0?(o.forEach(function(e){e.classList.toggle("hide")}),y(t.querySelector(".chaptersSection"),5),setTimeout(function(){y(n[e-2],5),setTimeout(function(){o.forEach(function(e){e.style.transform="rotateY(180deg)",e.classList.toggle("hide")}),s.eventDispatcher.trigger("addNewPages"),o=null},1e3)},650)):y(t.querySelector(".chaptersSection"),5)}),s.eventDispatcher.on("openPage",function(e){return y(e,5)}),s.eventDispatcher.on("closePage",function(e){return y(e,5,!0)}),m.addEventListener("mousemove",function(n){var s=0<t-b.top&&t<b.top+b.height;e=n.clientX,t=n.clientY,0<e-b.left&&e-b.left<75&&p&&s?(u=!0,m.body.setAttribute("style","cursor:move")):e<b.left+b.width&&e>b.left+b.width-75&&s?(d=!0,m.body.setAttribute("style","cursor:move")):(u=!1,d=!1,m.body.setAttribute("style","cursor:default"))}),m.addEventListener("mousemove",function(){(a||r)&&(r&&(l=(c-e)/6),a&&(l=180-(e-c)/6),l<=0&&(l=0),l>=180&&(l=180),g=!0,l>90&&h?(n.firstElementChild.setAttribute("style","z-index:0"),"matrix3d(-1, 0, 0, 0, 0, 1, 0, 0, 0, 0, -1, 0, 0, 0, 0, 1)"==i||"matrix3d(-1, 0, -1.22465e-16, 0, 0, 1, 0, 0, 1.22465e-16, 0, -1, 0, 0, 0, 0, 1)"==i?n.setAttribute("style","z-index:"+o):n.setAttribute("style","z-index:"+(x-(o-1))),v=!0,h=!1):l<90&&v&&(n.firstElementChild.setAttribute("style","z-index:1"),"matrix3d(-1, 0, 0, 0, 0, 1, 0, 0, 0, 0, -1, 0, 0, 0, 0, 1)"!=i&&"matrix3d(-1, 0, -1.22465e-16, 0, 0, 1, 0, 0, 1.22465e-16, 0, -1, 0, 0, 0, 0, 1)"!=i?n.setAttribute("style","z-index:"+o):n.setAttribute("style","z-index:"+(x-(o-1))),v=!1,h=!0),n.style.transform="rotateY("+-l+"deg)")}),m.addEventListener("mouseup",function(){r=!1,a=!1;var e=m.querySelector(".coinsBook");if(l<90&&g)var t=setInterval(function(){if(l<=5){if(n.style.transform="rotateY(0deg)",clearInterval(t),"col-xs-12 pageSection titleSection"!=n.className)return void(g=!1);var s=Math.round(e.getBoundingClientRect().left-b.left)/2;if(s>0)var o=setInterval(function(){s-=10,s>0?e.style.transform="translateX("+s+"px)":(e.style.transform="translateX(0px)",g=!1,clearInterval(o),p=!0,b=w())},20)}l-=4,l<=0&&(l=0),n.style.transform="rotateY("+-l+"deg)"},20);else if(l>=90&&g)var o=setInterval(function(){if(l>=175&&g){if(n.style.transform="rotateY(180deg)",clearInterval(o),"col-xs-12 pageSection titleSection"!=n.className)return void(g=!1);var t=Math.round(m.querySelector("#coinEntrance").getBoundingClientRect().right-e.getBoundingClientRect().right),i=0;if(t>0)var a=setInterval(function(){i+=10,i<t?e.style.transform="translateX("+i+"px)":(e.style.transform="translateX("+t+"px)",g=!1,clearInterval(a),p=!0,b=w(),f||(s.eventDispatcher.trigger("bookHaveOpened"),f=!0))},20)}else l+=4,l>=180&&(l=180),n&&(n.style.transform="rotateY("+-l+"deg)")},20)}),P(),y(m.querySelector("#firstPage"))};var y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]){var o=180,i=setInterval(function(){o>0?(o<90&&e.setAttribute("style","z-index:100"),o-=t,e.style.transform="rotateY("+-o+"deg)"):(s.eventDispatcher.trigger("addNewPages"),e.style.transform="rotateY(0deg)",clearInterval(i))},20);setTimeout(function(){l=0,g=!0,n=e,m.dispatchEvent(new Event("mouseup"))},800)}else{var a=0,r=setInterval(function(){a<180?(a+=t,e.style.transform="rotateY("+-a+"deg)"):(s.eventDispatcher.trigger("addNewPages"),e.style.transform="rotateY(180deg)",clearInterval(r))},20);setTimeout(function(){l=180,g=!0,n=e,m.dispatchEvent(new Event("mouseup"))},800)}},P=function(){var t=!0,s=!1,l=void 0;try{for(var p,g=Array.from(m.getElementsByTagName("section"))[Symbol.iterator]();!(t=(p=g.next()).done);t=!0){p.value.addEventListener("mousedown",function(t){(u||d)&&(n=t.currentTarget,o=_.getComputedStyle(n).getPropertyValue("z-index"),i=_.getComputedStyle(n).getPropertyValue("transform"),c=e,u?a=!0:r=!0)})}}catch(e){s=!0,l=e}finally{try{!t&&g.return&&g.return()}finally{if(s)throw l}}},w=function(){var e=m.querySelector(".coinsBook").firstElementChild;return"matrix3d(-1, 0, 0, 0, 0, 1, 0, 0, 0, 0, -1, 0, 0, 0, 0, 1)"===_.getComputedStyle(e).getPropertyValue("transform")||"matrix3d(-1, 0, -1.22465e-16, 0, 0, 1, 0, 0, 1.22465e-16, 0, -1, 0, 0, 0, 0, 1)"===_.getComputedStyle(e).getPropertyValue("transform")?m.querySelector("#coinEntrance").getBoundingClientRect():e.getBoundingClientRect()}},i=new o;t.rotateController=i},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){e.exports=n(5)}]);
//# sourceMappingURL=bundle.js.map